# 儒智小程序部署和使用指南

## 📋 目录
1. [环境准备](#环境准备)
2. [项目导入](#项目导入)
3. [配置设置](#配置设置)
4. [功能测试](#功能测试)
5. [部署发布](#部署发布)
6. [使用说明](#使用说明)
7. [常见问题](#常见问题)

## 🛠️ 环境准备

### 1. 微信开发者工具
- **下载地址**: https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html
- **版本要求**: 最新稳定版
- **系统要求**: Windows 7+, macOS 10.10+

### 2. 微信小程序账号
- **注册地址**: https://mp.weixin.qq.com/
- **账号类型**: 小程序账号
- **认证状态**: 建议完成认证（可选）

### 3. 后端服务
- **确保后端API服务正常运行**
- **默认地址**: http://localhost:8000
- **API文档**: 参考后端项目文档

## 📥 项目导入

### 步骤1: 下载项目
```bash
# 克隆项目（如果使用Git）
git clone [项目地址]

# 或直接下载项目压缩包并解压
```

### 步骤2: 打开微信开发者工具
1. 启动微信开发者工具
2. 使用微信扫码登录
3. 选择"小程序"开发模式

### 步骤3: 导入项目
1. 点击"导入项目"
2. **项目目录**: 选择 `ruzhi/miniprogram` 文件夹
3. **AppID**: 
   - 测试阶段：选择"测试号"
   - 正式发布：填写正式AppID
4. **项目名称**: 儒智小程序
5. 点击"导入"

## ⚙️ 配置设置

### 1. 后端API地址配置

编辑 `app.js` 文件：
```javascript
// 修改baseUrl为实际后端地址
globalData: {
  baseUrl: 'http://localhost:8000', // 开发环境
  // baseUrl: 'https://your-api-domain.com', // 生产环境
}
```

### 2. 项目配置

编辑 `project.config.json`：
```json
{
  "appid": "your-app-id", // 替换为实际AppID
  "projectname": "ruzhi-miniprogram",
  "setting": {
    "urlCheck": false, // 开发阶段可关闭URL检查
    "es6": true,
    "minified": true
  }
}
```

### 3. 域名配置（生产环境）

在微信公众平台配置：
1. 登录 https://mp.weixin.qq.com/
2. 进入"开发" -> "开发设置"
3. 配置服务器域名：
   - **request合法域名**: https://your-api-domain.com
   - **uploadFile合法域名**: https://your-api-domain.com
   - **downloadFile合法域名**: https://your-api-domain.com

## 🧪 功能测试

### 1. 基础测试

#### 启动项目
1. 在微信开发者工具中点击"编译"
2. 查看模拟器中的小程序界面
3. 检查控制台是否有错误信息

#### 页面导航测试
- [ ] 首页正常显示
- [ ] 底部导航切换正常
- [ ] 各功能页面可正常访问

### 2. 功能模块测试

#### OCR识别功能
1. 进入OCR页面
2. 选择识别模式
3. 测试图片上传（模拟器中可选择本地图片）
4. 验证识别结果显示
5. 测试AI解读功能

#### AI对话功能
1. 进入对话页面
2. 选择对话人物
3. 发送测试消息
4. 验证AI回复
5. 测试对话历史保存

#### 知识图谱功能
1. 进入知识图谱页面
2. 测试概念搜索
3. 查看概念详情
4. 测试概念扩展
5. 验证学习路径生成

#### 学习中心功能
1. 进入学习中心页面
2. 查看学习统计
3. 验证进度显示
4. 测试成就系统
5. 检查推荐功能

### 3. 自动化测试

在微信开发者工具控制台中运行：
```javascript
// 复制 test_miniprogram.js 内容到控制台
// 然后执行：
runAllTests()
```

## 🚀 部署发布

### 1. 开发版上传

#### 准备工作
1. 确保所有功能测试通过
2. 检查代码质量和性能
3. 优化图片和资源文件
4. 更新版本号和说明

#### 上传步骤
1. 在微信开发者工具中点击"上传"
2. 填写版本号（如：1.0.0）
3. 填写项目备注
4. 点击"上传"

### 2. 提交审核

#### 登录微信公众平台
1. 访问 https://mp.weixin.qq.com/
2. 进入小程序管理后台
3. 选择"版本管理"

#### 提交审核
1. 选择开发版本
2. 点击"提交审核"
3. 填写功能页面和说明：

**功能页面示例**：
```
首页: pages/index/index
OCR识别: pages/ocr/ocr  
AI对话: pages/dialogue/dialogue
知识图谱: pages/knowledge/knowledge
学习中心: pages/learning/learning
```

**功能说明示例**：
```
儒智是一款传统文化智能学习平台，提供：
1. OCR古籍识别 - 智能识别古籍文本并AI解读
2. AI人物对话 - 与孔子、老子等历史人物对话
3. 知识图谱 - 探索传统文化概念的深层联系
4. 学习中心 - 个性化学习统计和智能推荐
```

### 3. 发布上线

审核通过后：
1. 在版本管理中点击"发布"
2. 确认发布信息
3. 点击"确定发布"

## 📱 使用说明

### 1. 用户操作指南

#### 首次使用
1. 微信搜索"儒智"小程序
2. 点击进入小程序
3. 授权基本信息（可选）
4. 开始探索传统文化

#### 核心功能使用

**OCR识别**：
1. 点击底部"识别"标签
2. 选择识别模式
3. 拍照或选择图片
4. 查看识别结果和AI解读

**AI对话**：
1. 点击底部"对话"标签
2. 选择对话人物
3. 输入问题或选择推荐话题
4. 与AI进行深度交流

**知识图谱**：
1. 点击底部"知识"标签
2. 搜索感兴趣的概念
3. 查看概念详情和相关故事
4. 探索相关概念和学习路径

**学习中心**：
1. 点击底部"学习"标签
2. 查看学习统计和进度
3. 完成推荐的学习任务
4. 解锁成就徽章

### 2. 功能特色

#### 智能化特性
- **AI驱动**: 所有核心功能都集成了AI技术
- **个性化**: 基于用户行为的智能推荐
- **自适应**: 根据学习进度调整内容难度

#### 传统文化主题
- **视觉设计**: 水墨风格和传统文化元素
- **内容深度**: 深入解析传统文化概念
- **历史人物**: 与古代先贤的真实对话体验

## ❓ 常见问题

### 1. 开发问题

**Q: 小程序无法连接后端API？**
A: 
1. 检查后端服务是否正常运行
2. 确认API地址配置正确
3. 开发阶段关闭URL检查
4. 生产环境需配置合法域名

**Q: 图片上传失败？**
A:
1. 检查uploadFile域名配置
2. 确认后端支持文件上传
3. 检查图片大小和格式限制

**Q: AI功能无响应？**
A:
1. 检查DeepSeek API配置
2. 确认API密钥有效
3. 查看网络连接状态
4. 检查API调用频率限制

### 2. 使用问题

**Q: 小程序加载缓慢？**
A:
1. 检查网络连接
2. 清除小程序缓存
3. 重启微信应用
4. 更新微信到最新版本

**Q: 功能无法正常使用？**
A:
1. 确认微信版本支持（7.0.0+）
2. 检查小程序基础库版本
3. 重新进入小程序
4. 联系技术支持

### 3. 性能优化

**Q: 如何提升小程序性能？**
A:
1. 启用分包加载
2. 压缩图片资源
3. 使用缓存机制
4. 优化网络请求

## 📞 技术支持

### 联系方式
- **技术支持**: 通过GitHub Issues提交问题
- **用户反馈**: 小程序内反馈功能
- **文档更新**: 关注项目更新

### 相关资源
- [微信小程序官方文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信开发者社区](https://developers.weixin.qq.com/community/minihome)
- [项目GitHub仓库](https://github.com/your-repo/ruzhi)

---

**祝您使用愉快！** 🏛️✨

如有任何问题，欢迎随时联系我们的技术支持团队。
