# 儒智微信小程序

## 项目简介

儒智微信小程序是基于现有Web端功能开发的移动端应用，提供古籍OCR识别、AI历史人物对话、知识图谱浏览、经典文献阅读等核心功能。

## 技术栈

- **开发框架**: 微信小程序原生开发
- **UI组件库**: Vant Weapp
- **网络请求**: 自封装Request类
- **状态管理**: 页面级状态管理
- **缓存策略**: 微信小程序本地存储

## 项目结构

```
miniprogram/
├── app.js                 # 小程序入口文件
├── app.json               # 小程序配置文件
├── app.wxss               # 全局样式文件
├── sitemap.json           # 搜索配置文件
├── project.config.json    # 项目配置文件
├── api/                   # API接口封装
│   └── index.js
├── utils/                 # 工具函数
│   └── request.js         # 网络请求封装
├── components/            # 自定义组件
├── images/                # 图片资源
├── pages/                 # 页面文件
│   ├── home/              # 首页
│   ├── ocr/               # OCR识别
│   ├── chat/              # AI对话
│   ├── classics/          # 经典库
│   ├── knowledge/         # 知识图谱
│   └── profile/           # 个人中心
└── docs/                  # 文档
```

## 核心功能

### 1. 古籍OCR识别
- 支持拍照和相册选择
- 多种识别模式（古籍、标准、手写）
- 图像预处理和增强
- 异体字识别和转换
- 识别历史记录管理

### 2. AI历史人物对话
- 与孔子、孟子等历史人物对话
- 智能上下文理解
- 对话历史记录
- 多轮对话支持

### 3. 知识图谱浏览
- 概念关系可视化
- 智能搜索功能
- 概念详情查看
- 关联概念推荐

### 4. 经典文献阅读
- 《论语》、《孟子》等经典
- 章节导航和搜索
- 阅读进度记录
- 收藏和笔记功能

### 5. 个人中心
- 用户信息管理
- 学习统计展示
- 历史记录查看
- 设置和反馈

## 开发环境搭建

### 1. 安装微信开发者工具
- 下载并安装[微信开发者工具](https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html)
- 使用微信扫码登录

### 2. 创建小程序项目
- 在微信公众平台注册小程序账号
- 获取小程序AppID
- 在开发者工具中导入项目

### 3. 安装依赖
```bash
# 安装Vant Weapp组件库
npm install @vant/weapp
```

### 4. 构建npm
- 在开发者工具中点击"工具" -> "构建npm"
- 等待构建完成

## 配置说明

### 1. 修改AppID
在`project.config.json`中修改`appid`字段为你的小程序AppID：
```json
{
  "appid": "你的小程序AppID"
}
```

### 2. 配置API地址
在`app.js`中修改`apiBase`字段：
```javascript
globalData: {
  apiBase: 'https://your-api-domain.com', // 生产环境
  // apiBase: 'http://localhost:8000', // 开发环境
}
```

### 3. 配置服务器域名
在微信公众平台的"开发管理" -> "开发设置" -> "服务器域名"中配置：
- request合法域名：你的API服务器域名
- uploadFile合法域名：你的文件上传服务器域名
- downloadFile合法域名：你的文件下载服务器域名

## 开发调试

### 1. 本地调试
- 在开发者工具中打开项目
- 点击"编译"按钮
- 在模拟器中查看效果

### 2. 真机调试
- 点击"预览"按钮生成二维码
- 使用微信扫码在真机上调试

### 3. 调试技巧
- 使用`console.log`输出调试信息
- 在开发者工具的"调试器"中查看网络请求
- 使用"Storage"面板查看本地存储

## 部署发布

### 1. 代码审核
- 确保所有功能正常运行
- 检查代码规范和性能
- 测试各种边界情况

### 2. 上传代码
- 在开发者工具中点击"上传"
- 填写版本号和项目备注
- 等待上传完成

### 3. 提交审核
- 登录微信公众平台
- 在"版本管理"中找到刚上传的版本
- 点击"提交审核"
- 填写审核信息并提交

### 4. 发布上线
- 审核通过后在"版本管理"中点击"发布"
- 小程序正式上线

## 性能优化

### 1. 代码优化
- 使用分包加载减少首次加载时间
- 合理使用组件和页面缓存
- 避免频繁的setData操作

### 2. 图片优化
- 使用WebP格式图片
- 合理设置图片尺寸
- 使用CDN加速图片加载

### 3. 网络优化
- 合并网络请求
- 使用缓存减少重复请求
- 实现请求重试机制

### 4. 用户体验优化
- 添加加载状态提示
- 实现骨架屏效果
- 优化页面切换动画

## 常见问题

### 1. 网络请求失败
- 检查服务器域名是否已配置
- 确认API接口是否正常
- 查看网络请求的错误信息

### 2. 组件样式异常
- 检查Vant组件是否正确引入
- 确认样式文件路径是否正确
- 查看控制台的样式错误信息

### 3. 页面跳转失败
- 检查页面路径是否正确
- 确认页面是否在app.json中注册
- 查看跳转参数是否正确

### 4. 本地存储问题
- 检查存储的数据格式
- 确认存储空间是否足够
- 处理存储异常情况

## 更新日志

### v1.0.0 (2024-01-15)
- 完成小程序基础架构搭建
- 实现首页和核心功能页面
- 集成Vant组件库
- 完成网络请求封装
- 实现与后端API的对接

## 联系方式

如有问题或建议，请联系开发团队：
- 邮箱：dev@ruzhi.com
- 微信群：扫描二维码加入开发者群

## 许可证

本项目采用MIT许可证，详见LICENSE文件。
